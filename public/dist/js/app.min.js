angular.module("meanCms.controllers",[]),angular.module("meanCms.controllers").controller("homeCtrl",["$http","$scope","$location","Posts","User",function(a,b,c,d){b.formData={},d.get().success(function(a){b.posts=a.posts,b.user=a.user}),b.createPost=function(){$.isEmptyObject(b.formData)||d.createPost(b.formData).success(function(a){b.formData={},c.path("/"),b.posts=a})},b.removePost=function(a){d.removePost(a).success(function(a){b.posts=a})}}]),angular.module("meanCms.controllers").controller("viewPostCtrl",["$http","$scope","$location","$routeParams","Posts",function(a,b,c,d,e){b.post={},b.post_id=d.post_id,e.getPost(b.post_id).success(function(a){b.post=a})}]),angular.module("meanCms.controllers").controller("editPostCtrl",["$scope","$routeParams","Posts",function(a,b,c){a.formData={},a.post_id=b.post_id,c.getPost(a.post_id).success(function(b){a.formData=b}),a.updatePost=function(b){$.isEmptyObject(a.formData)||c.updatePost(b,a.formData).success(function(b){a.formData=b})}}]),angular.module("meanCms.controllers").controller("userAuthCtrl",["$scope","User",function(a,b){a.email="",a.password="",a.login=function(){$.isEmptyObject(a.email)||$.isEmptyObject(a.password)||b.login(a.email,a.password)},a.signUp=function(){console.log(a.email+" controller "+a.password),$.isEmptyObject(a.email)||$.isEmptyObject(a.password)||b.signUp(a.email,a.password)},a.logOut=function(){b.logout()}}]),angular.module("meanCms",["ngRoute","textAngular","meanCms.controllers","postService","userService"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"homeCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"userAuthCtrl"}).when("/signup",{templateUrl:"views/signup.html",controller:"userAuthCtrl"}).when("/createPost",{templateUrl:"views/createPost.html",controller:"homeCtrl"}).when("/posts/:post_id",{templateUrl:"views/viewPost.html",controller:"viewPostCtrl"}).when("/managePosts",{templateUrl:"views/managePosts.html",controller:"homeCtrl"}).when("/editPost/:post_id",{templateUrl:"views/editPost.html",controller:"editPostCtrl"})}]),angular.module("postService",[]).factory("Posts",["$http",function(a){return{get:function(){return a.get("api/posts")},getPost:function(b){return a.get("api/posts/"+b)},createPost:function(b){return a.post("api/posts",b)},updatePost:function(b,c){return a.post("api/updatePost/"+b,c)},removePost:function(b){return a.delete("api/posts/"+b)}}}]),angular.module("userService",[]).factory("User",["$http",function(a){return{login:function(b,c){return a.post("api/login",b,c)},signUp:function(b,c){return console.log(b+" factory "+c),a.post("api/signup",b,c)},logOut:function(){return a.get("api/logout")}}}]);